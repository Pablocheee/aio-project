<!DOCTYPE html>
<html lang="ru" class="dark" style="background: #050505;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIO.CORE ‚Äî Autonomous LLM Integration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Space Grotesk', sans-serif; background: #050505; color: #fff; scroll-behavior: smooth; margin: 0; }
        .glow-text { color: #34D59A; text-shadow: 0 0 20px rgba(52, 213, 154, 0.4); }
        .glass-card { background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.08); backdrop-filter: blur(12px); }
        .input-chat { background: transparent; border: none; border-bottom: 1px solid rgba(52, 213, 154, 0.2); outline: none; transition: 0.4s; color: #34D59A; width: 100%; font-family: monospace; }
        .btn-main { background: #34D59A; color: #000; font-weight: 700; transition: 0.4s; cursor: pointer; border: none; }
        .lang-hide { display: none !important; }
        #chat-win::-webkit-scrollbar { display: none; }
        .bot-msg { color: #34D59A; font-family: monospace; font-size: 13px; line-height: 1.6; margin-bottom: 12px; }
        .user-msg { color: #fff; font-family: monospace; font-size: 13px; opacity: 0.5; margin-bottom: 12px; text-align: right; }
    </style>
</head>
<body>

    <header class="p-6 flex justify-between items-center max-w-7xl mx-auto">
        <div class="text-2xl font-bold tracking-tighter uppercase">AIO<span class="glow-text">.CORE</span></div>
        <button onclick="toggleLang()" class="text-[10px] uppercase tracking-widest border border-white/10 px-4 py-2 rounded-full text-white">RU / EN</button>
    </header>

    <main class="max-w-5xl mx-auto px-6 py-12">
        <section class="text-center mb-16">
            <h1 class="text-5xl md:text-8xl font-bold mb-8 uppercase">
                <span class="lang-ru italic glow-text">AIO.OPERATOR</span>
                <span class="lang-en lang-hide italic glow-text">AIO.OPERATOR</span>
            </h1>
        </section>

        <section id="order" class="max-w-2xl mx-auto relative mb-20">
            <div class="glass-card p-8 md:p-12 rounded-[3rem] border-white/10 h-[500px] flex flex-col">
                <div id="chat-win" class="flex-1 overflow-y-auto mb-4 pr-2"></div>
                <div class="pt-4 border-t border-white/5 flex gap-4">
                    <input type="text" id="userInput" class="input-chat py-2" placeholder="–û—Ç–≤–µ—Ç..." onkeypress="if(event.key==='Enter') processInput()">
                    <button onclick="processInput()" class="text-[#34D59A]">‚û§</button>
                </div>
            </div>
        </section>
    </main>

    <div id="paymentModal" class="fixed inset-0 bg-black/98 hidden flex items-center justify-center p-6 z-[100] backdrop-blur-2xl">
        <div class="bg-zinc-900 border border-white/10 p-10 rounded-[3rem] max-w-md w-full text-center">
            <div class="mb-6 text-[#34D59A] text-[10px] uppercase tracking-widest">Order ID: <span id="displayOrderId">---</span></div>
            <h3 class="text-2xl font-bold mb-2">499 USDT (TRC20)</h3>
            <div class="bg-black p-5 rounded-2xl mb-6 border border-[#34D59A]/20 cursor-pointer" onclick="copyWallet()">
                <code id="wallet" class="text-[10px] text-[#34D59A]">UQAVTMHfwYcMn7ttJNXiJVaoA-jjRTeJHc2sjpkAVzc84oSY</code>
            </div>
            
            <button onclick="verifyPay(this)" class="w-full py-4 btn-main rounded-xl mb-4 uppercase text-[10px]">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é</button>
            <button onclick="closePayment()" class="text-[10px] text-gray-500 uppercase">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <script>
        const TG_TOKEN = '8516029558:AAENA2H4e2TS3HYbRpFKf4snk9w-EWwsAd0';
        const TG_CHAT_ID = '7318415778';
        let currentLang = 'ru';
        let step = 0;
        let currentOrderId = null;
        let userData = { url: '', tg: '', email: '' };

        const ariaText = {
            ru: [
                "–Ø ARIA. –£–∫–∞–∂–∏—Ç–µ URL –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:",
                "–ü—Ä–∏–Ω—è—Ç–æ. –í–∞—à –∫–æ–Ω—Ç–∞–∫—Ç –≤ Telegram:",
                "–í–∞—à Email –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤:",
                "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è... (5s)",
                "–°–ª–æ–π –≥–æ—Ç–æ–≤. –û–∂–∏–¥–∞—é 499 USDT. –ü—Ä–∏—à–ª–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –æ–ø–ª–∞—Ç—ã –≤ @mistah_chee.",
                "–û—à–∏–±–∫–∞. –í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, https://site.com –∏–ª–∏ @user):"
            ],
            en: [
                "I am ARIA. Specify project URL:",
                "Received. Telegram contact:",
                "Email for reports:",
                "Syncing... (5s)",
                "Layer ready. Awaiting 499 USDT. Send payment screenshot to @mistah_chee.",
                "Error. Please provide valid data:"
            ]
        };

        function validate(val, s) {
            const v = val.toLowerCase();
            if (v.includes("–ø—Ä–∏–≤–µ—Ç") || v.length < 3) return false;
            if (s === 0) return v.includes('.');
            if (s === 2) return v.includes('@');
            return true;
        }

        function addMsg(txt, side='bot') {
            const win = document.getElementById('chat-win');
            const d = document.createElement('div');
            d.className = side === 'bot' ? 'bot-msg' : 'user-msg';
            d.innerHTML = (side === 'bot' ? '> ' : '') + txt;
            win.appendChild(d);
            win.scrollTop = win.scrollHeight;
        }

        async function processInput() {
            const inp = document.getElementById('userInput');
            const val = inp.value.trim();
            if(!val) return;
            addMsg(val, 'user');
            inp.value = '';

            if (step < 3 && !validate(val, step)) {
                addMsg(ariaText[currentLang][5]);
                return;
            }

            if(step === 0) { userData.url = val; step++; addMsg(ariaText[currentLang][1]); }
            else if(step === 1) { userData.tg = val; step++; addMsg(ariaText[currentLang][2]); }
            else if(step === 2) {
                userData.email = val; step++;
                addMsg(ariaText[currentLang][3]);
                currentOrderId = Math.floor(100000 + Math.random() * 900000);
                document.getElementById('displayOrderId').innerText = currentOrderId;

                setTimeout(async () => {
                    const msg = `üíé NEW ORDER #${currentOrderId}\nURL: ${userData.url}\nTG: ${userData.tg}\nEmail: ${userData.email}`;
                    await fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendMessage?chat_id=${TG_CHAT_ID}&text=${encodeURIComponent(msg)}`);
                    addMsg(ariaText[currentLang][4]);
                    document.getElementById('paymentModal').classList.remove('hidden');
                }, 3000);
            } else {
                // –ò–ò –ß–ê–¢
                try {
                    const res = await fetch('/api/chat', {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({ message: val, lang: currentLang, type: 'chat' })
                    });
                    const data = await res.json();
                    addMsg(data.reply);
                } catch(e) { addMsg("Neural Hub Error."); }
            }
        }

        async function verifyPay(btn) {
            const oldText = btn.innerText;
            btn.innerText = "SCANNING...";
            try {
                const res = await fetch('/api/chat', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ type: 'verify', orderId: currentOrderId, lang: currentLang })
                });
                const data = await res.json();
                alert(data.reply);
            } catch(e) { alert("Node Error."); }
            btn.innerText = oldText;
        }

        function closePayment() {
            document.getElementById('paymentModal').classList.add('hidden');
            addMsg(currentLang === 'ru' ? "–°—á–µ—Ç –∞–∫—Ç–∏–≤–µ–Ω. –ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã?" : "Invoice active. What will you get?");
        }

        function copyWallet() {
            navigator.clipboard.writeText(document.getElementById('wallet').innerText);
            alert('Copied');
        }

        function toggleLang() {
            currentLang = currentLang === 'ru' ? 'en' : 'ru';
            document.getElementById('userInput').placeholder = currentLang === 'ru' ? "–û—Ç–≤–µ—Ç..." : "Type...";
        }

        window.onload = () => addMsg(ariaText[currentLang][0]);
    </script>
</body>
</html>
